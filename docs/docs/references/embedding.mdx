import UserAttributesDefault from './assets/user-attributes-default.png';
import UserAttributesOverride from './assets/user-attributes-override.png';

# Embedding

You can embed Lightdash content in your website or application securely using Lightdash embedding. Embedding is a paid-per-usage feature. To get embedding enabled on your instance, contact the Lightdash team. 

## Embed secret

The embed secret is used to generate tokens for embedding dashboards. 

This secret is like a password that will help you encrypt the URLs so we know the access is valid.

You can regenerate the secret by clicking on the `Generate new secret` button.  If you do this, people with an old URL will automatically lose access to any previously shared embed URL. 

## Allowed dashboards

Only dashboards included in the `allowed dashboards` can be accessed using embed URLs. To embed a dashboard, you need to first add it to the `allowed dashboards` list. 

## Configure 

Configure the embed URL. Then preview your settings and copy it to your clipboard.

### Dashboard

Select the dashboard that you want to embed. Only dashboards included in the `allowed dashboards` list appear here.

### Expires in

Set the amount of time it takes before your embed token expires. 

Although you can generate URLs directly from Lightdash with a long expiration using [`generate and copy URL`](#generate-copy-url), it is recommended to generate your own JWT embed tokens in your backend (using the [`code snippet`](#code-snippet)) with a short expiration using your `secret` to make sure people can't be using embed URLs outside your app.

### User attributes

Use user attributes to limit access to certain data in the embedded dashboard. You can use any [user attribute](/references/user-attributes.mdx) that you've defined in your organization in the embedded dashboard. 

#### How default values interact with embedding

By default, anyone viewing an embedded dashboard will have the `default` attribute value you've set for your user attributes. 

For example, here I have a user attribute `access_pii_data` with the default value `false`. Anyone viewing my embedded dashboard will also have `access_pii_data = false`.

<img src={UserAttributesDefault} width="447" height="378" style={{display: "block", margin: "0 auto 20px auto"}}/>

#### How to override default values

You can override the `default` value for a user attribute in your embedded dashboard by specifying the attribute name and value in the `user attributes` section here. 

For example, if I wanted the `access_pii_data` user attribute from above to be `true` (not the default value, `false`) for people viewing my embedded dashboard, then I would add it to the user attributes section in the embed configuration. 

<img src={UserAttributesOverride} width="448" height="130" style={{display: "block", margin: "0 auto 20px auto"}}/>

#### What happens if you don't have a default value set

If you haven't set a `default` value for a user attribute, then you need to set a specific value for the user attribute in the `user attributes` section here. Otherwise, anyone viewing the embedded dashboard will see an error for content usign data that's limited by the user attribute. 

### Preview

Clicking on `preview` allows you to preview the configuration for your embedded dashboard. This is how people viewing your embedded dashboard will see the dashboard + data.

### Generate & Copy URL

Clicking `generate & copy url` will generate an embed URL based on the configuration that you've set. You can embed this one-off URL directly into your application, but you will manually need to update the URL each time the embed URL expires. Alternatively, you can add the `code snippet` to your app to automatically generate embed URLs in your application.  

### Code snippet

Although you can generate URLs directly from Lightdash with a long expiration, it is recommended to generate your own JWT embed tokens in your backend with a short expiration using your `secret` to make sure people can't be using embed URLs outside your app. 

To make this easier to integrate, we included some code snippets you can copy and use in your app to generate a valid embed URL.