---
sidebar_label: How to use the Lightdash CLI
---

# Lightdash CLI

The Lightdash CLI is the recommended way to develop your dbt + Lightdash project. It makes development faster and 
easier, as well as giving you options for building more powerful automation to manage your Lightdash instance.

## Installation

To install Lightdash, you'll need to have [npm](https://docs.npmjs.com/downloading-and-installing-node-js-and-npm) 
installed. Mac/Linux users usually already have `npm` available.

To install the latest Lightdash CLI, run the following on your command line.

```shell
npm install -g @lightdash/cli
```

Or install a specific version (eg: 0.162.0)

```shell
npm install -g @lightdash/cli@0.162.0
```

You _may_ need to install an additional package if you see any errors:

**Mac OS**


```shell
brew install unixodbc
npm install -g @lightdash/cli
```

**Ubuntu**

```shell
sudo apt install unixodbc
npm install -g @lightdash/cli
```

### Check compatability

Your Lightdash CLI version should match the version of Lightdash you see in the UI (scroll to the bottom of your screen, and you should see it there!). You can check the version of 
your CLI by running:

```shell
lightdash --version
```

If you need to upgrade follow the [instructions to upgrade your cli](#upgrading).

## Authentication

Choose your preferred way to authenticate:

1. [Run **Login command**](#login) to use your email and password.
2. [Via **environment variables**](#environment-variables) to use a personal access token and help automate CI&CD pipelines.

### Login

To login to your Lightdash instance run the following command and provide your login email and password:

```shell
lightdash login https://my-lightdash.domain.com
```

where `https://my-lightdash.domain.com` is the address for your running Lightdash instance. For example Lightdash 
cloud users would type `lightdash login https://app.lightdash.cloud`.

**Note that if you are using Google SSO login you should authenticate via environment variables instead.**

### Environment variables

You can use the following environment variables to authenticate yourself on each command:

- **LIGHTDASH_API_KEY** a personal access token you can generate in the app under the user settings
- **LIGHTDASH_URL** address for your running Lightdash instance

Example:

```shell
LIGHTDASH_API_KEY=946fedb74003405646867dcacf1ad345 LIGHTDASH_URL="https://app.lightdash.cloud" lightdash preview
```

### Set active project

When you login you'll be asked to set an active project. You can change your active project by running:

```shell
lightdash config set-project
```

Or you can use the `LIGHTDASH_PROJECT` environment variable to indicate what project UUID the command should use.

Example:

```shell
LIGHTDASH_PROJECT="3675b69e-8324-4110-bdca-059031aa8da3" lightdash deploy
```

## Deploy a Lightdash project

Follow the steps in [get your dbt project Lightdash-ready](/get-started/setup-lightdash/lightdash-cli] and [create your first metrics](/get-started/setup-lightdash/add-metrics) to add some Lightdash metrics to 
your dbt project. Once you're happy with your changes you can run:

```shell
dbt compile
lightdash deploy
```

This will compile your metrics and push them to Lightdash. Once it's completed click the URL to head straight to 
your project.

## Create a developer preview environment

<a href="https://www.loom.com/share/fddc9adab0694f60a85d0a48d67469be">
    <img src="https://cdn.loom.com/sessions/thumbnails/fddc9adab0694f60a85d0a48d67469be-with-play.gif" />
</a>

**Developer previews** are temporary Lightdash projects where you can safely experiment with your metrics and charts 
without affecting your production project.

Follow the instructions above and when you're ready to preview your dbt project, run the following from inside your 
project:

```shell
dbt compile
lightdash preview
```

**Problems with credentials?**

When you create developer previews, Lightdash will use the same warehouse connection settings you have in your 
`profiles.yml` file for your current dbt project. This can be a problem if you're using a local database that your 
laptop can reach but your Lightdash instance cannot.

## Auto-generate `schema.yml` files

<a href="https://www.loom.com/share/82833c5ea8a841dbb0ebdbcd878f85a1">
    <img src="https://cdn.loom.com/sessions/thumbnails/82833c5ea8a841dbb0ebdbcd878f85a1-with-play.gif" />
</a>

To make it faster to write and maintain your `schema.yml` files, the Lightdash CLI will automatically generate and 
sync your `schema.yml` files.

Inside your dbt project, open a terminal and run this command to generate the `schema.yml` file for a model called 
`mymodel`:

```shell
git commit # make sure to commit all your existing project first!
lightdash generate -s mymodel
```

This will create or update an existing `schema.yml` file to add any new columns that have appeared in the database. 

### Auto-sync `schema.yml` files after `dbt run` 

Since the `generate` command relies on your database schema to detect which columns are required, you'll often want
to run `dbt run` before running `generate`. You can combine `dbt run` and `lighdash generate` into one command which 
will run models and then regenerate the 
`schema.yml` files for any models than changed:

```shell
git commit
lightdash dbt run  # Run dbt AND re-sync schema.yml files
```

### Generating `schema.yml` for multiple models

`lightdash generate` supports dbt model selection syntax to generate files for a group of models:
```shell
lightdash generate # all models
lightdash generate -s payments  # just payments
lightdash generate -s payments+ # payments and all children
lightdash generate -s +payments # payments and all parents
lightdash generate -s +payments+ # payments and all children and parents
lightdash generate -s tag:prod # all models with the prod tag
lightdash generate -s payments customers # two specific models
lightdash generate -s payments+ +customers tag:prod # mix and match
```

## Upgrading

To upgrade your version of the Lightdash cli run the following in your terminal:

```shell
npm install -g @lightdash/cli
lightdash --version
```
