{"ast":null,"code":"/*\n * Copyright 2021 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { __assign, __rest } from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { Classes as CoreClasses, Utils as CoreUtils, mergeRefs } from \"@blueprintjs/core\";\nimport * as Classes from \"./classes\";\nimport { Popover2 } from \"./popover2\";\nexport var ContextMenu2 = function (_a) {\n  var _b;\n\n  var content = _a.content,\n      children = _a.children,\n      _c = _a.transitionDuration,\n      transitionDuration = _c === void 0 ? 100 : _c,\n      restProps = __rest(_a, [\"content\", \"children\", \"transitionDuration\"]);\n\n  var _d = React.useState({\n    left: 0,\n    top: 0\n  }),\n      targetOffset = _d[0],\n      setTargetOffset = _d[1];\n\n  var _e = React.useState(false),\n      isOpen = _e[0],\n      setIsOpen = _e[1];\n\n  var handleContextMenu = React.useCallback(function (e) {\n    // support nested menus (inner menu target would have called preventDefault())\n    if (e.defaultPrevented) {\n      return;\n    }\n\n    e.preventDefault();\n    var newTargetOffset = {\n      left: e.clientX,\n      top: e.clientY\n    };\n    setTargetOffset(newTargetOffset);\n    setIsOpen(true);\n  }, []);\n  var cancelContextMenu = React.useCallback(function (e) {\n    return e.preventDefault();\n  }, []);\n  var handlePopoverInteraction = React.useCallback(function (nextOpenState) {\n    if (!nextOpenState) {\n      setIsOpen(false);\n    }\n  }, []);\n  var targetRef = React.useRef();\n  var renderTarget = React.useCallback(function (_a) {\n    var ref = _a.ref;\n    return React.createElement(\"div\", {\n      className: Classes.CONTEXT_MENU2_POPOVER_TARGET,\n      style: targetOffset,\n      ref: mergeRefs(ref, targetRef)\n    });\n  }, [targetOffset]);\n  var isDarkTheme = React.useMemo(function () {\n    return CoreUtils.isDarkTheme(targetRef === null || targetRef === void 0 ? void 0 : targetRef.current);\n  }, [targetRef.current]); // Generate key based on offset so a new Popover instance is created\n  // when offset changes, to force recomputing position.\n\n  var key = targetOffset.left + \"x\" + targetOffset.top;\n  var renderProps = {\n    isOpen: isOpen,\n    targetOffset: targetOffset\n  };\n  return React.createElement(\"div\", {\n    className: Classes.CONTEXT_MENU2,\n    onContextMenu: handleContextMenu\n  }, React.createElement(Popover2, __assign({}, restProps, {\n    content: // prevent right-clicking inside our context menu\n    React.createElement(\"div\", {\n      onContextMenu: cancelContextMenu\n    }, CoreUtils.isFunction(content) ? content(renderProps) : content),\n    enforceFocus: false,\n    key: key,\n    hasBackdrop: true,\n    isOpen: isOpen,\n    minimal: true,\n    onInteraction: handlePopoverInteraction,\n    popoverClassName: classNames((_b = {}, _b[CoreClasses.DARK] = isDarkTheme, _b)),\n    placement: \"right-start\",\n    rootBoundary: \"viewport\",\n    renderTarget: renderTarget,\n    transitionDuration: transitionDuration\n  })), CoreUtils.isFunction(children) ? children(renderProps) : children);\n};\nContextMenu2.displayName = \"Blueprint.ContextMenu2\";","map":{"version":3,"sources":["../../src/contextMenu2.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/*\n * Copyright 2021 Palantir Technologies, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { __assign, __rest } from \"tslib\";\nimport classNames from \"classnames\";\nimport * as React from \"react\";\nimport { Classes as CoreClasses, Utils as CoreUtils, mergeRefs } from \"@blueprintjs/core\";\nimport * as Classes from \"./classes\";\nimport { Popover2 } from \"./popover2\";\nexport var ContextMenu2 = function (_a) {\n    var _b;\n    var content = _a.content, children = _a.children, _c = _a.transitionDuration, transitionDuration = _c === void 0 ? 100 : _c, restProps = __rest(_a, [\"content\", \"children\", \"transitionDuration\"]);\n    var _d = React.useState({ left: 0, top: 0 }), targetOffset = _d[0], setTargetOffset = _d[1];\n    var _e = React.useState(false), isOpen = _e[0], setIsOpen = _e[1];\n    var handleContextMenu = React.useCallback(function (e) {\n        // support nested menus (inner menu target would have called preventDefault())\n        if (e.defaultPrevented) {\n            return;\n        }\n        e.preventDefault();\n        var newTargetOffset = { left: e.clientX, top: e.clientY };\n        setTargetOffset(newTargetOffset);\n        setIsOpen(true);\n    }, []);\n    var cancelContextMenu = React.useCallback(function (e) { return e.preventDefault(); }, []);\n    var handlePopoverInteraction = React.useCallback(function (nextOpenState) {\n        if (!nextOpenState) {\n            setIsOpen(false);\n        }\n    }, []);\n    var targetRef = React.useRef();\n    var renderTarget = React.useCallback(function (_a) {\n        var ref = _a.ref;\n        return (React.createElement(\"div\", { className: Classes.CONTEXT_MENU2_POPOVER_TARGET, style: targetOffset, ref: mergeRefs(ref, targetRef) }));\n    }, [targetOffset]);\n    var isDarkTheme = React.useMemo(function () { return CoreUtils.isDarkTheme(targetRef === null || targetRef === void 0 ? void 0 : targetRef.current); }, [targetRef.current]);\n    // Generate key based on offset so a new Popover instance is created\n    // when offset changes, to force recomputing position.\n    var key = targetOffset.left + \"x\" + targetOffset.top;\n    var renderProps = { isOpen: isOpen, targetOffset: targetOffset };\n    return (React.createElement(\"div\", { className: Classes.CONTEXT_MENU2, onContextMenu: handleContextMenu },\n        React.createElement(Popover2, __assign({}, restProps, { content: \n            // prevent right-clicking inside our context menu\n            React.createElement(\"div\", { onContextMenu: cancelContextMenu }, CoreUtils.isFunction(content) ? content(renderProps) : content), enforceFocus: false, key: key, hasBackdrop: true, isOpen: isOpen, minimal: true, onInteraction: handlePopoverInteraction, popoverClassName: classNames((_b = {}, _b[CoreClasses.DARK] = isDarkTheme, _b)), placement: \"right-start\", rootBoundary: \"viewport\", renderTarget: renderTarget, transitionDuration: transitionDuration })),\n        CoreUtils.isFunction(children) ? children(renderProps) : children));\n};\nContextMenu2.displayName = \"Blueprint.ContextMenu2\";\n//# sourceMappingURL=contextMenu2.js.map"]},"metadata":{},"sourceType":"module"}